(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["voteItem,"],{"8adc":function(t,e,a){},cc20:function(t,e,a){"use strict";var s=a("3835"),i=a("5530"),r=(a("4de4"),a("8adc"),a("58df")),n=a("0789"),o=a("9d26"),c=a("a9ad"),l=a("4e82"),u=a("7560"),d=a("f2e7"),h=a("1c87"),v=a("af2b"),m=a("d9bd");e["a"]=Object(r["a"])(c["a"],v["a"],h["a"],u["a"],Object(l["a"])("chipGroup"),Object(d["b"])("inputValue")).extend({name:"v-chip",props:{active:{type:Boolean,default:!0},activeClass:{type:String,default:function(){return this.chipGroup?this.chipGroup.activeClass:""}},close:Boolean,closeIcon:{type:String,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},disabled:Boolean,draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:Boolean,outlined:Boolean,pill:Boolean,tag:{type:String,default:"span"},textColor:String,value:null},data:function(){return{proxyClass:"v-chip--active"}},computed:{classes:function(){return Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({"v-chip":!0},h["a"].options.computed.classes.call(this)),{},{"v-chip--clickable":this.isClickable,"v-chip--disabled":this.disabled,"v-chip--draggable":this.draggable,"v-chip--label":this.label,"v-chip--link":this.isLink,"v-chip--no-color":!this.color,"v-chip--outlined":this.outlined,"v-chip--pill":this.pill,"v-chip--removable":this.hasClose},this.themeClasses),this.sizeableClasses),this.groupClasses)},hasClose:function(){return Boolean(this.close)},isClickable:function(){return Boolean(h["a"].options.computed.isClickable.call(this)||this.chipGroup)}},created:function(){var t=this,e=[["outline","outlined"],["selected","input-value"],["value","active"],["@input","@active.sync"]];e.forEach((function(e){var a=Object(s["a"])(e,2),i=a[0],r=a[1];t.$attrs.hasOwnProperty(i)&&Object(m["a"])(i,r,t)}))},methods:{click:function(t){this.$emit("click",t),this.chipGroup&&this.toggle()},genFilter:function(){var t=[];return this.isActive&&t.push(this.$createElement(o["a"],{staticClass:"v-chip__filter",props:{left:!0}},this.filterIcon)),this.$createElement(n["b"],t)},genClose:function(){var t=this;return this.$createElement(o["a"],{staticClass:"v-chip__close",props:{right:!0,size:18},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.$emit("click:close"),t.$emit("update:active",!1)}}},this.closeIcon)},genContent:function(){return this.$createElement("span",{staticClass:"v-chip__content"},[this.filter&&this.genFilter(),this.$slots.default,this.hasClose&&this.genClose()])}},render:function(t){var e=[this.genContent()],a=this.generateRouteLink(),s=a.tag,r=a.data;r.attrs=Object(i["a"])(Object(i["a"])({},r.attrs),{},{draggable:this.draggable?"true":void 0,tabindex:this.chipGroup&&!this.disabled?0:r.attrs.tabindex}),r.directives.push({name:"show",value:this.active}),r=this.setBackgroundColor(this.color,r);var n=this.textColor||this.outlined&&this.color;return t(s,this.setTextColor(n,r),e)}})},d88f:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"8","offset-md":"2"}},[a("v-card",{attrs:{elevation:"2"}},[a("v-card-title",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t.itemInfo.title)+" "),a("v-spacer"),t.itemInfo.isEnded?a("v-chip",{staticClass:"ma-2",attrs:{color:"red","text-color":"white"}},[t._v("已结束")]):t._e()],1),a("v-card-subtitle",[t._v("选择一首你喜欢的歌曲，为它投票吧。")]),a("v-card-text",{staticClass:"text-body-2"},[a("ul",{staticStyle:{color:"black"}},[a("li",[t._v("歌曲语言只能是中文普通话或英文，其中以中文为主")]),a("li",[t._v("歌词内容必须符合积极向上之主旨，杜绝低俗反动之内容")]),a("li",[t._v(" 午歌多用流行音乐，节奏明快、易于演唱。 "),a("strong",[t._v("不建议添加说唱部分过多的、曲调过高的歌曲。")])]),a("li",[t._v(" 不要恶意添加不当内容， "),a("strong",[t._v("你的姓名会显示在你所添加内容的旁")])]),a("li",[a("strong",[t._v("每次投票将按照票数排名从前往后选取歌曲，每周一换")])])])]),t._l(t.items,(function(e){return a("music-item",{key:e.musicId,attrs:{title:e.title,artist:e.artist,"add-by":e.addBy,"music-id":e.musicId,"vote-item":t.itemId},on:{showSnackbar:t.snackbar}})})),a("v-container",[a("v-card",{attrs:{elevation:"4"}},[a("v-card-title",[a("span",{staticClass:"float-left"},[t._v("没有喜欢的？添加一首！")])]),a("v-card-subtitle",[t._v("请不要添加列表中已有歌曲")]),a("v-card-text",[a("div",{staticClass:"ma-2"},[a("v-text-field",{attrs:{label:"歌曲标题",filled:""},model:{value:t.addMusic.title,callback:function(e){t.$set(t.addMusic,"title",e)},expression:"addMusic.title"}}),a("v-text-field",{attrs:{label:"歌手/作者",filled:""},model:{value:t.addMusic.artist,callback:function(e){t.$set(t.addMusic,"artist",e)},expression:"addMusic.artist"}}),a("v-btn",{attrs:{color:"light-blue",block:""},on:{click:t.add}},[t._v(t._s(t.buttonText))])],1)])],1)],1)],2)],1)],1)],1)},i=[],r=a("1da1"),n=(a("96cf"),a("99af"),a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-card",{attrs:{elevation:"4"}},[a("v-card-title",[a("span",{staticClass:"float-left"},[t._v(t._s(t.title)+" - "+t._s(t.artist))])]),a("v-card-subtitle",[t._v("由"+t._s(t.addBy)+"添加")]),a("v-card-text",[a("span",[t._v("搜索这首歌：")]),a("a",{attrs:{href:t.links.kugou,target:"_blank"}},[a("v-avatar",[a("v-img",{attrs:{src:"https://www.kugou.com/yy/static/images/play/logo.png","max-height":"32","max-width":"32"}})],1)],1),a("a",{attrs:{href:t.links.qq,target:"_blank"}},[a("v-avatar",[a("v-img",{attrs:{src:"https://y.qq.com/favicon.ico","max-height":"32","max-width":"32"}})],1)],1),a("a",{attrs:{href:t.links.netease,target:"_blank"}},[a("v-avatar",[a("v-img",{attrs:{src:"https://s1.music.126.net/style/favicon.ico","max-height":"32","max-width":"32"}})],1)],1),a("v-btn",{staticClass:"float-right",attrs:{color:"light-blue"},on:{click:t.vote}},[t._v(t._s(t.buttonText))])],1)],1)],1)}),o=[],c={props:["title","add-by","artist","music-id","vote-item"],data:function(){return{buttonText:"投票",count:0,links:{kugou:"https://www.kugou.com/yy/html/search.html#searchKeyWord=".concat(this.artist,"%20-%20").concat(this.title),qq:"https://y.qq.com/portal/search.html#w=".concat(this.title,"-%20").concat(this.artist),netease:"https://music.163.com/#/search/m/?s=".concat(this.title,"-").concat(this.artist)}}},methods:{vote:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.count){t.next=4;break}return this.buttonText="仅一次机会，确定？",this.count+=1,t.abrupt("return");case 4:return t.next=6,this.tcb.callFunction({name:"vote-music",data:{token:sessionStorage.getItem("token"),sid:sessionStorage.getItem("sid"),voteItem:this.voteItem,musicId:this.musicId},parse:!0});case 6:if(e=t.sent,!e.code){t.next=10;break}return console.error("TCB Error: ".concat(e.code," Message: ").concat(e.message," requestId: ").concat(e.requestId)),t.abrupt("return",this.$emit("showSnackbar","服务器内部错误，请稍后再试","error"));case 10:if(e.result.status){t.next=14;break}return console.error("Vote Error: requestId: ".concat(e.requestId)),this.buttonText="投票出错，点击重试",t.abrupt("return",this.$emit("showSnackbar",e.result.message,"error"));case 14:this.$emit("showSnackbar","投票成功！","success"),this.$router.push("/voteResult/".concat(this.voteItem));case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},l=c,u=a("2877"),d=a("6544"),h=a.n(d),v=a("8212"),m=a("8336"),p=a("b0af"),b=a("99d9"),f=a("a523"),g=a("adda"),k=Object(u["a"])(l,n,o,!1,null,null,null),x=k.exports;h()(k,{VAvatar:v["a"],VBtn:m["a"],VCard:p["a"],VCardSubtitle:b["b"],VCardText:b["c"],VCardTitle:b["d"],VContainer:f["a"],VImg:g["a"]});var C={data:function(){return{token:sessionStorage.getItem("token"),sid:sessionStorage.getItem("sid"),itemId:this.$route.params.id,itemInfo:{title:"正在加载",isEnded:!1,end:"2004-3-30"},buttonText:"添加",buttonCount:0,items:[{musicId:"123",title:"233",artist:"333",addBy:"444"},{musicId:"1234",title:"233",artist:"333",addBy:"444"},{musicId:"12345",title:"233",artist:"333",addBy:"444"}],addMusic:{title:null,artist:null}}},components:{"music-item":x},methods:{reload:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.tcb.callFunction({name:"get-item",data:{token:this.token,sid:this.sid,voteItem:this.itemId},parse:!0});case 2:if(e=t.sent,!e.code){t.next=6;break}return console.error("TCB Error: ".concat(e.code," Message: ").concat(e.message," requestId: ").concat(e.requestId)),t.abrupt("return",this.$emit("showSnackbar","服务器内部错误，请稍后再试","error"));case 6:if(e.result.status){t.next=10;break}return console.error("Login Error: sid: ".concat(this.g_sid," requestId: ").concat(e.requestId)),this.$emit("showSnackbar",e.result.message,"error"),t.abrupt("return",this.$router.push("/"));case 10:if(!e.result.data.isVoted){t.next=12;break}return t.abrupt("return",this.$router.push("/voteResult/".concat(this.itemId)));case 12:this.itemInfo.title=e.result.data.name,this.itemInfo.isEnded=e.result.data.isEnded,this.itemInfo.end=e.result.data.end,this.items=e.result.data.musics;case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),snackbar:function(t,e){this.$emit("showSnackbar",t,e)},add:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.buttonCount){t.next=4;break}return this.buttonText="仅一次机会，确定？",this.buttonCount+=1,t.abrupt("return");case 4:return t.next=6,this.tcb.callFunction({name:"add-music",data:{token:sessionStorage.getItem("token"),sid:sessionStorage.getItem("sid"),voteItem:this.itemId,title:this.addMusic.title,artist:this.addMusic.artist},parse:!0});case 6:if(e=t.sent,!e.code){t.next=10;break}return console.error("TCB Error: ".concat(e.code," Message: ").concat(e.message," requestId: ").concat(e.requestId)),t.abrupt("return",this.$emit("showSnackbar","服务器内部错误，请稍后再试","error"));case 10:if(e.result.status){t.next=14;break}return console.error("Vote Error: requestId: ".concat(e.requestId)),this.buttonText="添加出错，点击重试",t.abrupt("return",this.$emit("showSnackbar",e.result.message,"error"));case 14:this.$emit("showSnackbar","添加成功！","success"),this.$router.push("/voteResult/".concat(this.itemId));case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.reload()}},I=C,w=a("cc20"),_=a("62ad"),y=a("0fd9"),$=a("2fa4"),S=a("8654"),V=Object(u["a"])(I,s,i,!1,null,null,null);e["default"]=V.exports;h()(V,{VBtn:m["a"],VCard:p["a"],VCardSubtitle:b["b"],VCardText:b["c"],VCardTitle:b["d"],VChip:w["a"],VCol:_["a"],VContainer:f["a"],VRow:y["a"],VSpacer:$["a"],VTextField:S["a"]})}}]);
//# sourceMappingURL=voteItem,.7ec9f93f.js.map